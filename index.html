<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giám Sát Sức Khỏe</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon"type="image/png" href="logofavicon1.png"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script> 
    <script src="script.js" defer></script>
</head>
<body>
   <nav class="left-sidebar">
        <div class="sidebar-logo">
            <img src="logo.png" alt="Health Monitor">
            <span> Health Monitor</span>
        </div>

        <ul class="nav-list">
            <li class="nav-item active"> 
                <a href="#">
                   <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="modal-trigger" data-modal-target="modal-user-management">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M412-168q45-91 120-121.5T660-320q23 0 45 4t43 10q24-38 38-82t14-92q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 45 11.5 86t34.5 76q41-20 85-31t89-11q32 0 61.5 5.5T500-340q-23 12-43.5 28T418-278q-12-2-20.5-2H380q-32 0-63.5 7T256-252q32 32 71.5 53.5T412-168Zm68 88q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80ZM380-420q-58 0-99-41t-41-99q0-58 41-99t99-41q58 0 99 41t41 99q0 58-41 99t-99 41Zm0-80q25 0 42.5-17.5T440-560q0-25-17.5-42.5T380-620q-25 0-42.5 17.5T320-560q0 25 17.5 42.5T380-500Zm280 120q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM480-480Z"/>
                    </svg>
                    <span>Quản lý Người Dùng</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="modal-trigger" data-modal-target="modal-history">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M480-80q-155 0-269-103T82-440h81q15 121 105.5 200.5T480-160q134 0 227-93t93-227q0-134-93-227t-227-93q-86 0-159.5 42.5T204-640h116v80H88q29-140 139-230t253-90q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm112-232L440-464v-216h80v184l128 128-56 56Z"/>
                    </svg>
                    <span>Xem Lịch Sử</span>
                </a>
            </li>
        </ul>
    </nav>
    <div class="page-content">
        <div class="container container-main">
        <h1>Bảng Giám Sát Sức Khỏe</h1>
        
        <div style="text-align: center; margin-bottom: 25px;">
            Trạng thái kết nối: <span id="status" class="status disconnected">Đang ngắt</span>
        </div>

        <main class="main-contain">
                <div class="data-cards-grid">
                    <div class="data-card heart-rate">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#EA3323">
                            <path d="M300-840q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 5-.5 10t-.5 10h-80q1-5 1-10v-10q0-60-40-100t-100-40q-47 0-87 26.5T518-666h-76q-15-41-55-67.5T300-760q-60 0-100 40t-40 100v10q0 5 1 10H81q0-5-.5-10t-.5-10q0-94 63-157t157-63Zm-88 480h112q32 31 70 67t86 79q48-43 86-79t70-67h113q-38 42-90 91T538-158l-58 52-58-52q-69-62-120.5-111T212-360Zm230 40q13 0 22.5-7.5T478-347l54-163 35 52q5 8 14 13t19 5h320v-80H623l-69-102q-6-9-15.5-13.5T518-640q-13 0-22.5 7.5T482-613l-54 162-34-51q-5-8-14-13t-19-5H40v80h297l69 102q6 9 15.5 13.5T442-320Zm38-167Z"/>
                        </svg>

                        <p>Nhịp Tim: <span id="heart-rate" class="value">--</span> <span class="unit">bpm</span></p>
                    </div>
                    <div class="data-card spo2">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#25d448">
                            <path d="M480-160q-17 0-28.5-11.5T440-200v-160q0-17 11.5-28.5T480-400h100q17 0 28.5 11.5T620-360v160q0 17-11.5 28.5T580-160H480Zm20-60h60v-120h-60v120ZM680-80v-110q0-17 11.5-28.5T720-230h80v-30H680v-60h140q17 0 28.5 11.5T860-280v70q0 17-11.5 28.5T820-170h-80v30h120v60H680Zm-320-2Q237-96 158.5-187.5T80-408q0-100 79.5-217.5T400-880q132 112 209.5 212T710-480h-83q-22-63-79-137T400-774Q281-665 220.5-573T160-408q0 96 55.5 163.5T360-163v81Zm34-326Z"/>
                        </svg>
                        <p>Oxy Máu: <span id="spo2" class="value">--</span> <span class="unit">%</span></p>
                    </div>
                    <div class="data-card objecttemp">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#F19E39">
                            <path d="M480-80q-83 0-141.5-58.5T280-280q0-48 21-89.5t59-70.5v-320q0-50 35-85t85-35q50 0 85 35t35 85v320q38 29 59 70.5t21 89.5q0 83-58.5 141.5T480-80Zm-40-440h80v-40h-40v-40h40v-80h-40v-40h40v-40q0-17-11.5-28.5T480-800q-17 0-28.5 11.5T440-760v240Z"/>
                        </svg>
                        <p>Nhiệt Độ: <span id="objecttemp" class="value">--</span> <span class="unit">°C</span></p>
                    </div>
                </div>

                <div class="charts-section">
                    <h2>Biểu đồ Theo Dõi</h2>
                    <div class="tabs-container">
                        <div class="tab active" data-chart="heartRate" onclick="showChart('heartRate')">Nhịp Tim</div>
                        <div class="tab" data-chart="spo2" onclick="showChart('spo2')">SpO₂</div>
                        <div class="tab" data-chart="objecttemp" onclick="showChart('objecttemp')">Nhiệt Độ</div>
                    </div>

                    <div id="heartRateChartContainer" class="chart-container active">
                        <canvas id="heartRateChart"></canvas>
                    </div>
                    <div id="spo2ChartContainer" class="chart-container">
                        <canvas id="spo2Chart"></canvas>
                    </div>
                    <div id="objecttempChartContainer" class="chart-container">
                        <canvas id="objecttempChart"></canvas>
                    </div>
                </div>
        </main>
    </div>
     <div id="modal-user-management" class="modal-overlay">
            <div class="modal-content">
                <button class="modal-close" data-modal="modal-user-management">&times; </button>

                <div class="user-managerment"> 
                    <h2>Quản Lý Người Dùng</h2>
                    <div id="currentUserDisplay"> 
                        Người dùng hiện tại: 
                        <span id="current-user-name" class="user-info-name">CHƯA CHỌN</span> 
                        (ID: <span id="current-user-id" class="user-info-id">---</span>)
                    </div>
                    <p id="userMessage" class="message-info"></p>
                    <form id="createUserForm">
                        <input type="text" id="username" placeholder="Tên đăng nhập" required>
                        <input type="text" id="fullName" placeholder="Họ và Tên" required>
                        <input type="number" id="age" placeholder="Tuổi" required>
                        <select id="gender" required>
                            <option value="" disabled selected>Chọn Giới Tính</option>
                            <option value="male">Nam</option>
                            <option value="female">Nữ</option>
                            <option value="other">Khác</option>
                        </select>
                        <button type="submit">Tạo Người Dùng Mới</button>
                    </form>
                </div>

                <div id="user-selection" class="sidebar-widget">
                    <h3>Chọn Người Dùng</h3>
                    <select id="existingUsersSelect">
                        <option value="" disabled selected>Chọn người dùng để giám sát</option>
                    </select>
                    <button id="setCurrentUserBtn" type="button">Chọn</button>
                    <span id="currentSelectionStatus" style="display: block; margin-top: 10px; color:#2c3e50;">Chưa có người dùng được chọn</span>
                </div>
            </div>
            
        </div>

         <div id="modal-history" class="modal-overlay">
            <div class="modal-content">
                <button class="modal-close" data-modal="modal-history">&times; </button>

                <div class="history-section sidebar-widget">
                    <h2>Lịch sử dữ liệu</h2>
                    <div class="history-controls">
                        <select id = "historyUserIdSelect">
                            <option value="" disabled selected>Chọn Người Dùng</option>
                        </select>
               
                        <button id="loadHistoryBtn">Tải Dữ Liệu Lịch Sử</button>
                    </div>
                    <p id="historyMessage" class="message-info" style="margin-top: 10px;"></p>

                    <div id="historyResults">
                        <div class="charts-section" style="margin-top: 20px; padding: 0; background: none; box-shadow: none">
                            <h3>Lịch Sử Nhịp Tim 24h Qua</h3>
                            <div class="chart-container active">
                                <canvas id="historyHeartRateChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>"
    
       
                
       

                
            
        
        
        
       
        
        
        
    
</body>
</html>